<?xml version="1.0" encoding="windows-1252" ?>
<!--Ant buildfile generated by Oracle JDeveloper-->
<!--Generated May 9, 2014 4:39:29 PM-->
<project name="AWRParser" default="all">
  <property file="build.properties"/>
  <property name="build.root.dir" value="."/>
  <path id="library.Jcommon-1.0.22.jar">
    <pathelement location="lib/jcommon-1.0.22/jcommon-1.0.22/jcommon-1.0.22.jar"/>
  </path>
  <path id="library.Jfreechart-1.0.17.jar">
    <pathelement location="lib/jfreechart-1.0.17/jfreechart-1.0.17/lib/jfreechart-1.0.17.jar"/>
  </path>
  <path id="library.Jcommon-xml-1.0.22.jar">
    <pathelement location="lib/jcommon-1.0.22/jcommon-1.0.22/jcommon-xml-1.0.22.jar"/>
  </path>
  <path id="library.Ojdbc5.jar">
    <pathelement location="lib/ojdbc5.jar"/>
  </path>
  <path id="classpath">
    <path refid="library.Jcommon-1.0.22.jar"/>
    <path refid="library.Jfreechart-1.0.17.jar"/>
    <path refid="library.Jcommon-xml-1.0.22.jar"/>
    <path refid="library.Ojdbc5.jar"/>
  </path>
  
  <!-- TARGET INIT -->
  <target name="init">
    <tstamp/>
    <mkdir dir="${output.dir}"/>
  </target>
  
  <!-- TARGET CLEAN -->
  <target name="clean" description="Clean the project">
    <delete includeemptydirs="true" quiet="true">
      <fileset dir="${output.dir}" includes="**/*"/>
    </delete>
  </target>
  
  <target name="version" description="Replaces the version# in code and readme">
    <replace dir="${build.root.dir}/src" value="${visual-awr.version.num}">
      <include name="**/*.java"/>
      <replacetoken>@VERSION-NUM@</replacetoken>
    </replace>
    <replace file="${build.root.dir}/vawr-readme.html" token="@VERSION-NUM@" value="${visual-awr.version.num}"/>
  </target>
  
  <target name="build" description="Compile Java source files" depends="version">
    <mkdir dir="${build.root.dir}/classes"/>
    <javac srcdir="${build.root.dir}/src" destdir="${build.root.dir}/classes"
           classpath="${classpath}" includes="*/**/*.java" deprecation="on"
           failonerror="true" debug="${debug}"/>
  </target>
  
  <target name="jar" description="Build the Jar file(s)">
   <delete file="${build.root.dir}/vawr.jar"/>
    <jar jarfile="${build.root.dir}/lib/vawr.jar"
         basedir="${build.root.dir}/classes"/>
  </target>
  
  <target name="dist" description="create the distribution" depends="jar">
    <delete includeemptydirs="true" dir="${build.root.dir}/dist"/>
    <mkdir dir="${build.root.dir}/dist"/>
    <mkdir dir="${build.root.dir}/dist/lib"/>
    
    <!-- Obfiscate
    <antcall target="yguard"/>
    -->
    <copy todir="${build.root.dir}/dist/lib">
      <fileset dir="${build.root.dir}/lib">
        <include name="jfreechart*.jar"/>
        <include name="jcommon*.jar"/>
        <include name="ojdbc*.jar"/>
        <include name="vawr.jar"/>
        <include name="*.gif"/>
      </fileset>
    </copy>
    
    <copy todir="${build.root.dir}/dist">
      <fileset dir="${build.root.dir}">
        <include name="vawr-readme.html"/>
        <include name="run.bat"/>
        <include name="properties.ser"/>
      </fileset>
    </copy>
    
    <copy todir="${build.root.dir}/dist/testing">
      <fileset dir="${build.root.dir}/testing">
        <include name="*EDWPRD*.out"/>
      </fileset>
    </copy>

    <zip destfile="${build.root.dir}/dist/visual-awr${visual-awr.version.num}.zip"
         basedir="${build.root.dir}/dist/" excludes="jdk/**, *.zip"/>

  </target>
  
  <!-- TARGET YGUARD -->
  <target name="yguard" description="Obfiscates the files">
    <taskdef name="yguard" classname="com.yworks.yguard.YGuardTask"
             classpath="yguard.jar"/>
    <!-- the following can be adjusted to your needs -->
    <yguard>
      <inoutpair in="${build.root.dir}/lib/vawr.jar" out="${build.root.dir}/dist/lib/vawr.jar"/>
      <shrink logfile="${shrinklog}">
      </shrink>
    </yguard>
  </target>

</project>
